#!/usr/bin/python 
from sys import argv,exit
oldobjs = ["PQconnectdb", "PQconnectStart", "PQconnectPoll", "PQsetdbLogin", "PQconndefaults", "PQconninfoFree", "PQfinish", "PQreset", "PQresetStart", "PQresetPoll", "PQdb", "PQuser", "PQpass", "PQhost", "PQport", "PQtty", "PQoptions", "PQstatus", "PQtransactionStatus", "PQparameterStatus", "PQprotocolVersion", "PQserverVersion", "PQerrorMessage", "PQsocket", "PQbackendPID", "PQgetssl", "PQclientEncoding", "PQsetClientEncoding", "PQexec", "PQexecParams", "PQprepare", "PQexecPrepared", "PQdescribePrepared", "PQdescribePortal", "PQsendQuery", "PQsendQueryParams", "PQsendPrepare", "PQsendQueryPrepared", "PQsendDescribePrepared", "PQsendDescribePortal", "PQgetResult", "PQconsumeInput", "PQisBusy", "PQsetnonblocking", "PQisnonblocking", "PQflush", "PQgetCancel", "PQfreeCancel", "PQcancel", "PQrequestCancel", "PQntuples", "PQnfields", "PQfname", "PQfnumber", "PQftable", "PQftablecol", "PQfformat", "PQftype", "PQfmod", "PQfsize", "PQbinaryTuples", "PQgetvalue", "PQgetisnull", "PQgetlength", "PQnparams", "PQparamtype", "PQprint", "PQdisplayTuples", "PQprintTuples", "PQresultStatus", "PQresStatus", "PQresultErrorMessage", "PQresultErrorField", "PQclear", "PQmakeEmptyPGresult", "PQcmdStatus", "PQcmdTuples", "PQoidValue", "PQoidStatus", "PQputCopyData", "PQputCopyEnd", "PQgetCopyData", "PQgetline", "PQgetlineAsync", "PQputline", "PQputnbytes", "PQendcopy", "createPQExpBuffer", "initPQExpBuffer", "destroyPQExpBuffer", "termPQExpBuffer", "resetPQExpBuffer", "enlargePQExpBuffer", "printfPQExpBuffer", "appendPQExpBuffer", "appendPQExpBufferStr", "appendPQExpBufferChar", "appendBinaryPQExpBuffer", "lo_create", "lo_open", "lo_close", "lo_unlink", "blob_read", "blob_write", "blob_lseek", "blob_tell", "blob_import", "blob_export", "blob_truncate", "blob_position", "blob_positionlob", "blob_directread", "clob_read", "clob_write", "clob_lseek", "clob_tell", "clob_import", "clob_export", "clob_truncate", "clob_position", "clob_positionlob", "PQsetErrorVerbosity", "PQtrace", "PQuntrace", "PQencryptPassword", "PQinitSSL", "PQisthreadsafe", "PQregisterThreadLock", "PQdsplen", "PQmblen", "PQenv2encoding", "PQescapeStringConn", "PQescapeString", "PQescapeByteaConn", "PQescapeBytea", "PQunescapeBytea", "PQfreemem", "PQnotifies", "PQfreeNotify", "PQsetNoticeProcessor", "PQsetNoticeReceiver", "PQfn"]

newobjs = ["KCIConnectionCreate", "KCIConnectionStart", "KCIConnectionPoll", "KCIConnectionCreateDeprecated", "KCIConnectionGetDefaultOptions", "KCIConnectionFreeOptions", "KCIConnectionDestory", "KCIConnectionReconnect", "KCIConnectionRestart", "KCIConnectionRepoll", "KCIConnectionGetDatabase", "KCIConnectionGetUser", "KCIConnectionGetPassword", "KCIConnectionGetHost", "KCIConnectionGetPort", "KCIConnectionGetTty", "KCIConnectionGetCommandLineOptions", "KCIConnectionGetStatus", "KCIConnectionGetTransactionStatus", "KCIConnectionGetParameterValue", "KCIConnectionGetProtocolVersion", "KCIConnectionGetServerVersion", "KCIConnectionGetLastError", "KCIConnectionGetSocket", "KCIConnectionGetBackendPid", "KCIConnectionGetSSL", "KCIConnectionGetClientEncoding", "KCIConnectionSetClientEncoding", "KCIStatementExecute", "KCIStatementExecuteWithParams", "KCIStatementPrepare", "KCIStatementExecutePrepared", "KCIStatementDescribePrepared", "KCICursorDescribe", "KCIStatementSend", "KCIStatementSendWithParams", "KCIStatementSendPrepare", "KCIStatementSendExecutePrepared", "KCIStatementSendDescribePrepared", "KCICursorSendDescribe", "KCIConnectionFetchResult", "KCIConnectionForceRead", "KCIConnectionIsBusy", "KCIConnectionSetNonBlocking", "KCIConnectionIsNonBlocking", "KCIConnectionFlush", "KCICancelAlloc", "KCICancelDealloc", "KCICancelSend", "KCICancelCurrent", "KCIResultGetRowCount", "KCIResultGetColumnCount", "KCIResultGetColumnName", "KCIResultGetColumnNo", "KCIResultGetRelationOidOfColumn", "KCIResultGetColumnNoInRelation", "KCIResultGetColumnFormat", "KCIResultGetColumnType", "KCIResultGetColumnTypmod", "KCIResultGetColumnLength", "KCIResultIsBinary", "KCIResultGetColumnValue", "KCIResultColumnIsNull", "KCIResultGetColumnValueLength", "KCIResultGetParamCount", "KCIResultGetParamType", "KCIResultPrint", "KCIResultPrintEx", "KCIResultPrintEx1", "KCIResultGetStatusCode", "KCIResultGetStatusString", "KCIResultGetErrorString", "KCIResultGetErrorField", "KCIResultDealloc", "KCIResultCreate", "KCIResultGetCommandStatus", "KCIResultGetAffectedCount", "KCIResultInsertRowOid", "KCIResultInsertRowOidStr", "KCICopySendData", "KCICopySendEOF", "KCICopyReceiveData", "KCICopyReadLine", "KCICopyReadLineAsync", "KCICopyWriteLine", "KCICopyWriteBytes", "KCICopySync", "KCIStringCreate", "KCIStringInitialize", "KCIStringDestory", "KCIStringFreeData", "KCIStringResetData", "KCIStringEnlarge", "KCIStringPrintfFormat", "KCIStringAppendFormat", "KCIStringAppendCString", "KCIStringAppendChar", "KCIStringAppend", "KCILobCreate", "KCILobOpen", "KCILobClose", "KCILobDrop", "KCIBlobRead", "KCIBlobWrite", "KCIBlobSeek", "KCIBlobTell", "KCIBlobImport", "KCIBlobExport", "KCIBlobTruncate", "KCIBlobPosition", "KCIBlobPositionLob", "KCIBlobDirectRead", "KCIClobRead", "KCIClobWrite", "KCIClobSeek", "KCIClobTell", "KCIClobImport", "KCIClobExport", "KCIClobTruncate", "KCIClobPosition", "KCIClobPositionLob", "KCISetVerbosity", "KCISetLogFile", "KCIResetLogFile", "KCIEncrypt", "KCIInitializeSSLEnv", "KCISupportMultiThread", "KCISetLockThreadFunc", "KCIGetStringDisplayLength", "KCIGetStringByteLength", "KCIGetEnvEncoding", "KCIEscapeStringEx", "KCIEscapeString", "KCIEscapeByteaEx", "KCIEscapeBytea", "KCIUnescapeBytea", "KCIFree", "KCIGetNextNotification", "KCIFreeNotification", "KCISetNoticeProcessor", "KCISetNoticeReceiver", "KCIExecuteFunction"]

if __name__ == "__main__":
	if len(argv) < 2:
		print argv[0] + " <filename>"
		exit(1)
	#get the contents of filename
	data = open(argv[1]).read()
	
	num = len(oldobjs)
	for i in range(num):
		data = data.replace(oldobjs[i],newobjs[i])
	
	#overwrite file
	open(argv[1],"w").write(data)
	

